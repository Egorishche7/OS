## Abstract Factory and Singleton Patterns ##

Предположим, у нас есть база данных с разными типами пользователей (например, администраторы, модераторы, обычные пользователи), и нам нужно создавать объекты пользователей в зависимости от типа, который указывается в базе данных. Мы можем использовать паттерн Abstract Factory для создания объектов пользователей, а также паттерн Singleton для управления фабриками.

Класс User является абстрактным пользователем, он определяет интерфейс для выполнения действия action() разными пользователями. Классы Admin, Mod и NormalUser - конкретные пользователи, реализующие данный интерфейс.  
Класс UserFactory является абстрактной фабрикой, определяющей интерфейс для создания пользователей createUser() разных типов. Классы AdminFactory, ModFactory и UserFactory являются конкретными фабриками, реализующими этот интерфейс и создающими соответствующие объекты пользователей.  
Класс UserFactoryManager используется для управления экземплярами фабрик. Его методы:  
- getInstance() - получить единственный экземпляр данного класса;  
- registerFactory() - зарегистрировать фабрику;  
- getFactory() - получить фабрику из менеджера по типу пользователя.

Класс Database представляет базу данных и хранит информацию о типе каждого пользователя. Метод getUserType() позволяет получить тип пользователя из базы данных.

Благодаря использованию паттернов Singleton и Abstract Factory, можно легко добавлять новые типы пользователей и фабрики для создания соответствующих объектов, не затрагивая уже написанный код.
